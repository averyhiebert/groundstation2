# Useful Notes for Developers
This document seeks to clarify a few details about how the project is
structured and how it uses Qt and (eventually) QGIS, especially for
those with limited experience.

## Overall Structure.
The `groundstation2` root directory currently contains all the
code for the main window's appearance and the main application's logic (which
is very simple, as most of it is handled behind the scenes by Qt).
The main window currently includes widgets defined in the `dummy_map` and
`data_sources/dummy_source` modules, both of which will later be replaced
with more complicated components.

## How the Interfaces Work
All interfaces were designed using Qt Designer, a what-you-see-is-what-you-get
tool that lets you add and modify interface components visually, and saves the
result as a `.ui` file.  We then use the tool `pyuic4` to compile these ui
files into a python file containing a class definition that defines a 
widget class inheriting from one of the Qt widget classes.

### Modifying Automatically-Generated Widgets
To add additional functionality to the machine-generated classes, you can
import the class in a different python file, and create a new class which
is a subclass of the automatically-generated class.  **Do not modify the
automatically-generated code directly**, since the generated code will
be overwritten every time the interface is recompiled.

### Using Custom Widgets Inside Other Widgets Using Qt Designer
A custom widget can be run as its own application, but can also be used as
a component of a larger application.  In Qt Designer, when designing an
interface, you can add a basic "widget" to the interface, and then use
the "Promote to..." feature to make the compiler replace that widget with the
component you want at compile time.  Since the Qt Designer interface is not
primarily designed for Python, doing this involves pointing to a made up
header file as described [here](https://stackoverflow.com/questions/19622014/how-do-i-use-promote-to-in-qt-designer-in-pyqt4).  
As a commenter on stackoverflow states, this is "inscrutable black magic", but
there's not much we can do about it.  Look at `grounstation2/mainWindow.ui` in
Qt Designer to see an example of this working.

### Communication Between Widgets in Qt
Qt uses "Signals" to pass information between widgets in a way consistent with
the overall functioning of the application.  Check out 
`groundstation2/dummy_map/__init__.py` for an example of a class that uses
a signal to receive data and do something with it.  This signal is "emitted"
in `groundstation2/__init__.py`.  If you're planning on developing an
interface component that does something with the telemetry data being
received, you should handle it in a similar way.

## Cleaning and Building Using Make
If you're not already aware, `make` is a popular tool for automating parts
of the development process.  The tasks that I've automated are defined in
files named "Makefile".

For this project, to compile ui files into python files, run `make` or
`make ui` in the `groundstation2` directory.  To remove all autogenerated
files and `.pyc` files, run `make clean`.

